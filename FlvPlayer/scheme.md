# FlvPlayer一周优化方案（修订版）

## 优先级排序与时间分配

### 第1-3天：延迟优化（核心目标）
### 第4-5天：基础多分屏功能
### 第6天：多语言支持实现
### 第7天：集成测试与性能调优

## 一、延迟优化方案

### 1. WebSocket连接参数优化

- [x] **连接超时设置**：设置合理的连接超时时间（建议3-5秒）
  - [x] 检测WebSocket是否建立连接
  - [x] 检测是否收到媒体数据（连接成功后再等5秒）
  - [x] 使用最大重试次数的方式，使用指数退避(exponential backoff)的策略
- [x] **压缩设置优化**：
  - [x] 禁用WebSocket压缩功能（对于实时流压缩会增加延迟） 服务端配置`perMessageDeflate: false`来进行禁止压缩--服务端
  - [x] 为特定场景（低带宽环境）添加可选压缩开关--后续添加UI

### 2. 解码器参数调优

1. **mpegts.js配置优化**
   - [x] 动态缓冲区调整策略
     - [x] 实现基础的缓冲区动态调整策略（根据网络状况切换预设配置）

     - [x] 接收缓冲区大小调整

   - [x] 硬件加速检测与启用
3. **连接质量监控（客户端部分）**
- [x] 数据包接收速率监控
   - [x] 连接质量评估算法
- [x] 连接状态UI反馈

### 3. 实时帧管理与硬件加速
- **简化版智能丢帧与硬件加速**
  - [x] 实现基础的丢帧策略（保留I帧，必要时丢弃P/B帧）
  - [x] 智能丢帧策略实现
  - [x] 开发简单的延迟监控机制（当延迟超过阈值时触发丢帧）
  - [x] 添加硬件加速检测与启用（使用mpegts.js内置能力）

## 二、多分屏UI组件

### 1. 多分屏布局实现
- **基础分屏组件**
  - [x] 实现1/4/9分屏布局组件（Vue 3组件封装）
  - [x] 开发分屏间视频源切换功能
  - [x] 实现分屏自适应窗口大小调整
  - [x] 添加分屏选中与高亮功能

### 2. 核心功能实现
- **必要功能集**
  - [x] 实现基础本地抓拍功能（Canvas截图+下载）
  - [x] 开发简单的全屏模式（单屏/全局切换）

## 三、多语言支持

### 1. 国际化框架搭建
- [x] 集成vue-i18n库
- [x] 设计语言资源文件结构（中/英/越三语）
- [x] 实现语言切换功能

### 2. 语言资源开发
- [x] 提取UI界面所有文本到语言资源文件
- [x] 完成中文、英文和越南语的基础翻译 -- 暂时并未全部完成
- [x] 实现语言环境自动检测功能
